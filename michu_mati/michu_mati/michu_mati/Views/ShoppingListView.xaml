<UserControl x:Class="michu_mati.Views.ShoppingListView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             FontFamily="Segoe UI"
             FontSize="15">

    <Grid Margin="30">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>


        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,20">
            <TextBlock Text="Lista zakupów"
                       FontSize="28"
                       FontWeight="SemiBold"
                       Foreground="#2c3e50"
                       VerticalAlignment="Center"/>

            <Button Content="Odśwież"
                    Command="{Binding RefreshCommand}"
                    Margin="30,0,0,0"
                    Padding="16,8"
                    Background="#3498db"
                    Foreground="White"
                    BorderThickness="0"
                    CornerRadius="8"
                    Cursor="Hand"
                    FontWeight="Medium"/>
        </StackPanel>

  
        <Border Grid.Row="1"
                Background="#fdfdfd"
                CornerRadius="16"
                BorderBrush="#e9ecef"
                BorderThickness="2"
                Padding="25">

            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <ItemsControl ItemsSource="{Binding ShoppingList}"
                              FontSize="17"
                              Foreground="#2d3436">

                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Grid Margin="0,8">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                         
                                <Ellipse Grid.Column="0"
                                         Width="12"
                                         Height="12"
                                         Fill="#74b9ff"
                                         Margin="0,0,15,0"
                                         VerticalAlignment="Center"/>

                             
                                <TextBlock Grid.Column="1"
                                           Text="{Binding}"
                                           TextWrapping="Wrap">
                        
                                    <TextBlock.Style>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="FontWeight" Value="Normal"/>
                                            <Setter Property="Foreground" Value="#2d3436"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding}" Value="">
                                                    <Setter Property="Visibility" Value="Collapsed"/>
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding}" Value="{Binding RelativeSource={RelativeSource AncestorType=ItemsControl}, Path=DataContext.ShoppingList/LastItem}">
                                                    <Setter Property="FontWeight" Value="Bold"/>
                                                    <Setter Property="Foreground" Value="#0984e3"/>
                                                    <Setter Property="FontSize" Value="18"/>
                                                </DataTrigger>
                                                <Trigger Property="Text" Value="Brak zaplanowanych posiłków – dodaj coś w planerze!">
                                                    <Setter Property="FontStyle" Value="Italic"/>
                                                    <Setter Property="Foreground" Value="#636e72"/>
                                                    <Setter Property="FontSize" Value="18"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>
                            </Grid>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>

                
                    <ItemsControl.Template>
                        <ControlTemplate>
                            <ItemsPresenter/>
                            <ControlTemplate.Triggers>
                                <DataTrigger Binding="{Binding ShoppingList.Count}" Value="0">
                                    <Setter TargetName="ItemsPresenter" Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </ItemsControl.Template>
                </ItemsControl>


                <TextBlock Text="Brak zaplanowanych posiłków – dodaj coś w planerze!"
                           FontSize="20"
                           Foreground="#b2bec3"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           FontStyle="Italic">
                    <TextBlock.Style>
                        <Style TargetType="TextBlock">
                            <Setter Property="Visibility" Value="Collapsed"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding ShoppingList.Count}" Value="0">
                                    <Setter Property="Visibility" Value="Visible"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TextBlock.Style>
                </TextBlock>
            </ScrollViewer>
        </Border>
    </Grid>
</UserControl>